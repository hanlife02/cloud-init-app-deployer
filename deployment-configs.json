{
  "docker_install_configs": {
    "ubuntu": {
      "display_name": "Ubuntu 20.04/22.04",
      "package_manager": "apt",
      "registry_mirror": "https://mirrors.pku.edu.cn/docker-ce/linux/ubuntu",
      "packages": [
        "apt-transport-https",
        "ca-certificates",
        "curl",
        "gnupg2",
        "software-properties-common"
      ],
      "commands": [
        "mkdir -p /etc/apt/keyrings",
        "curl -fsSL https://mirrors.pku.edu.cn/docker-ce/linux/ubuntu/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg",
        "echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.pku.edu.cn/docker-ce/linux/ubuntu $(lsb_release -cs) stable\" | tee /etc/apt/sources.list.d/docker.list > /dev/null",
        "apt-get update",
        "apt-get install -y docker-ce docker-ce-cli containerd.io",
        "systemctl enable docker",
        "systemctl start docker",
        "usermod -aG docker ubuntu",
        "docker --version > /root/docker-version.txt"
      ]
    },
    "centos": {
      "display_name": "CentOS 7/8",
      "package_manager": "yum",
      "registry_mirror": "http://mirrors.pku.edu.cn/repoconfig/docker-ce/",
      "packages": [
        "yum-utils",
        "device-mapper-persistent-data",
        "lvm2"
      ],
      "commands": [
        "wget http://mirrors.pku.edu.cn/repoconfig/docker-ce/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo",
        "yum makecache",
        "yum install -y docker-ce docker-ce-cli containerd.io",
        "systemctl enable docker",
        "systemctl start docker",
        "usermod -aG docker centos",
        "docker --version > /root/docker-version.txt"
      ]
    },
    "debian": {
      "display_name": "Debian 10/11",
      "package_manager": "apt",
      "registry_mirror": "https://mirrors.pku.edu.cn/docker-ce/linux/debian",
      "packages": [
        "apt-transport-https",
        "ca-certificates",
        "curl",
        "gnupg2",
        "software-properties-common"
      ],
      "commands": [
        "apt-get remove -y docker docker-engine docker.io containerd runc || true",
        "apt-get install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common",
        "mkdir -p /etc/apt/keyrings",
        "curl -fsSL https://mirrors.pku.edu.cn/docker-ce/linux/debian/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg",
        "echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.pku.edu.cn/docker-ce/linux/debian $(lsb_release -cs) stable\" | tee /etc/apt/sources.list.d/docker.list > /dev/null",
        "apt-get update",
        "apt-get install -y docker-ce",
        "systemctl enable docker",
        "systemctl start docker",
        "usermod -aG docker debian",
        "docker --version > /root/docker-version.txt"
      ]
    }
  },
  "image_mapping": {
    "Ubuntu 20.04": "ubuntu",
    "Ubuntu 22.04": "ubuntu",
    "ubuntu-20.04": "ubuntu",
    "ubuntu-22.04": "ubuntu",
    "CentOS 7": "centos",
    "CentOS 8": "centos",
    "centos-7": "centos",
    "centos-8": "centos",
    "Debian 10": "debian",
    "Debian 11": "debian",
    "debian-10": "debian",
    "debian-11": "debian"
  },
  "deployments": {
    "docker": {
      "version": "latest"
    },
    "nginx": {
      "packages": [
        "nginx"
      ],
      "commands": [
        "systemctl enable nginx",
        "systemctl start nginx",
        "nginx -v > /root/nginx-version.txt"
      ]
    },
    "mysql": {
      "packages": [
        "mysql-server"
      ],
      "commands": [
        "systemctl enable mysql",
        "systemctl start mysql",
        "mysql --version > /root/mysql-version.txt"
      ]
    },
    "nodejs": {
      "packages": [
        "nodejs",
        "npm"
      ],
      "commands": [
        "node --version > /root/node-version.txt",
        "npm --version > /root/npm-version.txt"
      ]
    }
  }
}